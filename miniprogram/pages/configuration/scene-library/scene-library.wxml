<view class="scene-library-container">
  <!-- 页面标题 -->
  <view class="page-header">
    <text class="page-title">场景管理</text>
    <text class="page-subtitle">管理所有场景，用于组合成MF路线</text>
  </view>

  <!-- 分类标签 -->
  <view class="category-tabs">
    <view
      wx:for="{{categories}}"
      wx:key="key"
      class="category-tab {{currentCategory === item.key ? 'active' : ''}}"
      bindtap="switchCategory"
      data-category="{{item.key}}"
    >
      <text class="tab-text">{{item.name}}</text>
      <text class="tab-count">({{item.count}})</text>
    </view>
  </view>

  <!-- 场景列表 -->
  <view class="scene-list">
    <view
      wx:for="{{filteredScenes}}"
      wx:key="id"
      class="scene-item"
      data-index="{{index}}"
    >
      <!-- 场景内容 -->
      <view class="scene-content">
        <view class="scene-info">
          <view class="scene-header">
            <text class="scene-name">{{item.name}}</text>
            <view class="scene-badge {{item.isBuiltIn ? 'builtin' : 'custom'}}">
              {{item.isBuiltIn ? '内置' : '自定义'}}
            </view>
          </view>
          <view wx:if="{{item.description}}" class="scene-description">
            <text class="desc-text">{{item.description}}</text>
          </view>
          <view class="scene-meta">
            <text class="meta-text">{{item.categoryText}}</text>
            <text class="meta-divider">•</text>
            <text class="meta-text">创建于 {{item.createTimeText}}</text>
          </view>
        </view>
        <view class="scene-actions">
          <view class="action-btn edit" catchtap="editScene" data-item="{{item}}">
            <text class="btn-text">编辑</text>
          </view>
          <view class="action-btn delete" catchtap="deleteScene" data-item="{{item}}">
            <text class="btn-text">删除</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- 空状态 -->
  <view wx:if="{{filteredScenes.length === 0}}" class="empty-state">
    <text class="empty-text">该分类暂无场景</text>
    <text class="empty-tip">添加自定义场景来丰富你的MF路线</text>
  </view>

  <!-- 添加按钮 -->
  <view class="add-button" bindtap="addScene">
    <text class="add-icon">+</text>
    <text class="add-text">新增场景</text>
  </view>
</view>